{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createStore } from 'vuex';\nimport router from '../router';\nimport { auth } from '../firebase';\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from 'firebase/auth';\nexport default createStore({\n  state: {\n    user: null\n  },\n  mutations: {\n    SET_USER(state, user) {\n      state.user = user;\n    },\n    CLEAR_USER(state) {\n      state.user = null;\n    }\n  },\n  actions: {\n    async login({\n      commit\n    }, details) {\n      const {\n        email,\n        password\n      } = details;\n      try {\n        await signInWithEmailAndPassword(auth, email, password);\n      } catch (error) {\n        switch (error.code) {\n          case 'auth/user-not-found':\n            alert(\"User not found\");\n            break;\n          case 'auth/wrong-password':\n            alert(\"Wrong password\");\n            break;\n          default:\n            alert(\"Something went wrong\");\n        }\n        return;\n      }\n      commit('SET_USER', auth.currentUser);\n      router.push('/');\n    },\n    async register({\n      commit\n    }, details) {\n      const {\n        email,\n        password\n      } = details;\n      try {\n        await createUserWithEmailAndPassword(auth, email, password);\n      } catch (error) {\n        switch (error.code) {\n          case 'auth/email-already-in-use':\n            alert(\"Email already in use\");\n            break;\n          case 'auth/invalid-email':\n            alert(\"Invalid email\");\n            break;\n          case 'auth/operation-not-allowed':\n            alert(\"Operation not allowed\");\n            break;\n          case 'auth/weak-password':\n            alert(\"Weak password\");\n            break;\n          default:\n            alert(\"Something went wrong\");\n        }\n        return;\n      }\n      commit('SET_USER', auth.currentUser);\n      router.push('/');\n    },\n    async logout({\n      commit\n    }) {\n      await signOut(auth);\n      commit('CLEAR_USER');\n      router.push('/login');\n    },\n    fetchUser({\n      commit\n    }) {\n      auth.onAuthStateChanged(async user => {\n        if (user === null) {\n          commit('CLEAR_USER');\n        } else {\n          commit('SET_USER', user);\n          if (router.isReady() && router.currentRoute.value.path === '/login') {\n            router.push('/');\n          }\n        }\n      });\n    }\n  }\n});","map":{"version":3,"names":["createStore","router","auth","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","state","user","mutations","SET_USER","CLEAR_USER","actions","login","commit","details","email","password","error","code","alert","currentUser","push","register","logout","fetchUser","onAuthStateChanged","isReady","currentRoute","value","path"],"sources":["/Users/sunteen/Documents/GitHub/rocket-web/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\nimport router from '../router'\nimport { auth } from '../firebase'\nimport { \n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signOut \n} from 'firebase/auth'\n\nexport default createStore({\n  state: {\n    user: null\n  },\n  mutations: {\n\n    SET_USER (state, user) {\n      state.user = user\n    },\n\n    CLEAR_USER (state) {\n      state.user = null\n    }\n\n  },\n  actions: {\n    async login ({ commit }, details) {\n      const { email, password } = details\n\n      try {\n        await signInWithEmailAndPassword(auth, email, password)\n      } catch (error) {\n        switch(error.code) {\n          case 'auth/user-not-found':\n            alert(\"User not found\")\n            break\n          case 'auth/wrong-password':\n            alert(\"Wrong password\")\n            break\n          default:\n            alert(\"Something went wrong\")\n        }\n\n        return\n      }\n\n      commit('SET_USER', auth.currentUser)\n\n      router.push('/')\n    },\n\n    async register ({ commit}, details) {\n       const { email, password } = details\n\n      try {\n        await createUserWithEmailAndPassword(auth, email, password)\n      } catch (error) {\n        switch(error.code) {\n          case 'auth/email-already-in-use':\n            alert(\"Email already in use\")\n            break\n          case 'auth/invalid-email':\n            alert(\"Invalid email\")\n            break\n          case 'auth/operation-not-allowed':\n            alert(\"Operation not allowed\")\n            break\n          case 'auth/weak-password':\n            alert(\"Weak password\")\n            break\n          default:\n            alert(\"Something went wrong\")\n        }\n\n        return\n      }\n\n      commit('SET_USER', auth.currentUser)\n\n      router.push('/')\n    },\n\n    async logout ({ commit }) {\n      await signOut(auth)\n\n      commit('CLEAR_USER')\n\n      router.push('/login')\n    },\n\n    fetchUser ({ commit }) {\n      auth.onAuthStateChanged(async user => {\n        if (user === null) {\n          commit('CLEAR_USER')\n        } else {\n          commit('SET_USER', user)\n\n          if (router.isReady() && router.currentRoute.value.path === '/login') {\n            router.push('/')\n          }\n        }\n      })\n    }\n    \n  }\n})"],"mappings":";AAAA,SAASA,WAAW,QAAQ,MAAM;AAClC,OAAOC,MAAM,MAAM,WAAW;AAC9B,SAASC,IAAI,QAAQ,aAAa;AAClC,SACEC,8BAA8B,EAC9BC,0BAA0B,EAC1BC,OAAO,QACF,eAAe;AAEtB,eAAeL,WAAW,CAAC;EACzBM,KAAK,EAAE;IACLC,IAAI,EAAE;EACR,CAAC;EACDC,SAAS,EAAE;IAETC,QAAQ,CAAEH,KAAK,EAAEC,IAAI,EAAE;MACrBD,KAAK,CAACC,IAAI,GAAGA,IAAI;IACnB,CAAC;IAEDG,UAAU,CAAEJ,KAAK,EAAE;MACjBA,KAAK,CAACC,IAAI,GAAG,IAAI;IACnB;EAEF,CAAC;EACDI,OAAO,EAAE;IACP,MAAMC,KAAK,CAAE;MAAEC;IAAO,CAAC,EAAEC,OAAO,EAAE;MAChC,MAAM;QAAEC,KAAK;QAAEC;MAAS,CAAC,GAAGF,OAAO;MAEnC,IAAI;QACF,MAAMV,0BAA0B,CAACF,IAAI,EAAEa,KAAK,EAAEC,QAAQ,CAAC;MACzD,CAAC,CAAC,OAAOC,KAAK,EAAE;QACd,QAAOA,KAAK,CAACC,IAAI;UACf,KAAK,qBAAqB;YACxBC,KAAK,CAAC,gBAAgB,CAAC;YACvB;UACF,KAAK,qBAAqB;YACxBA,KAAK,CAAC,gBAAgB,CAAC;YACvB;UACF;YACEA,KAAK,CAAC,sBAAsB,CAAC;QAAA;QAGjC;MACF;MAEAN,MAAM,CAAC,UAAU,EAAEX,IAAI,CAACkB,WAAW,CAAC;MAEpCnB,MAAM,CAACoB,IAAI,CAAC,GAAG,CAAC;IAClB,CAAC;IAED,MAAMC,QAAQ,CAAE;MAAET;IAAM,CAAC,EAAEC,OAAO,EAAE;MACjC,MAAM;QAAEC,KAAK;QAAEC;MAAS,CAAC,GAAGF,OAAO;MAEpC,IAAI;QACF,MAAMX,8BAA8B,CAACD,IAAI,EAAEa,KAAK,EAAEC,QAAQ,CAAC;MAC7D,CAAC,CAAC,OAAOC,KAAK,EAAE;QACd,QAAOA,KAAK,CAACC,IAAI;UACf,KAAK,2BAA2B;YAC9BC,KAAK,CAAC,sBAAsB,CAAC;YAC7B;UACF,KAAK,oBAAoB;YACvBA,KAAK,CAAC,eAAe,CAAC;YACtB;UACF,KAAK,4BAA4B;YAC/BA,KAAK,CAAC,uBAAuB,CAAC;YAC9B;UACF,KAAK,oBAAoB;YACvBA,KAAK,CAAC,eAAe,CAAC;YACtB;UACF;YACEA,KAAK,CAAC,sBAAsB,CAAC;QAAA;QAGjC;MACF;MAEAN,MAAM,CAAC,UAAU,EAAEX,IAAI,CAACkB,WAAW,CAAC;MAEpCnB,MAAM,CAACoB,IAAI,CAAC,GAAG,CAAC;IAClB,CAAC;IAED,MAAME,MAAM,CAAE;MAAEV;IAAO,CAAC,EAAE;MACxB,MAAMR,OAAO,CAACH,IAAI,CAAC;MAEnBW,MAAM,CAAC,YAAY,CAAC;MAEpBZ,MAAM,CAACoB,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAEDG,SAAS,CAAE;MAAEX;IAAO,CAAC,EAAE;MACrBX,IAAI,CAACuB,kBAAkB,CAAC,MAAMlB,IAAI,IAAI;QACpC,IAAIA,IAAI,KAAK,IAAI,EAAE;UACjBM,MAAM,CAAC,YAAY,CAAC;QACtB,CAAC,MAAM;UACLA,MAAM,CAAC,UAAU,EAAEN,IAAI,CAAC;UAExB,IAAIN,MAAM,CAACyB,OAAO,EAAE,IAAIzB,MAAM,CAAC0B,YAAY,CAACC,KAAK,CAACC,IAAI,KAAK,QAAQ,EAAE;YACnE5B,MAAM,CAACoB,IAAI,CAAC,GAAG,CAAC;UAClB;QACF;MACF,CAAC,CAAC;IACJ;EAEF;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}